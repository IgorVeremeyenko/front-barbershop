
<div class="card">
    <p-table [value]="options" dataKey="id" editMode="row" styleClass="p-datatable-striped" [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
            <tr>
                <th>#</th>
                <th>Имя</th>
                <th>Категория/название</th>
                <th>Рабочие дни</th>
                <th style="width: 5rem"></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="product">
                <td>{{product.id}}</td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="product.name">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{product.name}}
                        </ng-template>
                    </p-cellEditor>
                </td>
                <td><b>{{product.category}}</b>/
                    <div *ngFor="let item of product.service">
                        {{item.name}}
                    </div>
                </td>
                <td>
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <div *ngFor="let day of product.days" >
                                <!-- <input pInputText type="text" [(ngModel)]="day.dayOfWeek"> -->
                                <p-tag [value]="day.dayOfWeek" [severity]="editing ? 'warning' : 'success'" [removable]="editing"></p-tag>
                                
                                <p-listbox [options]="days" [(ngModel)]="selectedDays" optionLabel="day" [style]="{'width':'15rem'}"
                                [multiple]="true" [metaKeySelection]="false"></p-listbox>
                            </div>
                        </ng-template>
                        <ng-template pTemplate="output">
                            <div *ngFor="let day of product.days" class="card flex align-items-center gap-2">
                                <p-tag [value]="day.dayOfWeek" [severity]="editing ? 'warning' : 'success'" [removable]="editing"></p-tag>
                            </div>
                        </ng-template>
                    </p-cellEditor>
                    
                </td>
                <td>
                    <div class="flex align-items-center justify-content-center gap-2">
                        <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(product)" class="p-button-rounded p-button-text"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(product)" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onRowEditCancel(product, ri)" class="p-button-rounded p-button-text p-button-danger"></button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>